<section class="page">
  <h2>Registro de Reserva</h2>

    <div class="card rs-wrap">

      <!-- DATOS DEL USUARIO -->
      <div class="rs-title">Datos del usuario:</div>
      <div class="rs-grid">
        <!-- Col izquierda -->
        <div class="rs-col">
          <div class="rs-line">
            <div class="rs-label">Código de usuario:</div>
            <input [value]="usuario.codigo" readonly>
          </div>
          <div class="rs-line">
            <div class="rs-label">Nombre:</div>
            <input [value]="usuario.nombre" readonly>
          </div>
        </div>
        <!-- Col derecha -->
        <div class="rs-col">
          <div class="rs-line">
            <div class="rs-label">Tipo de usuario:</div>
            <input [value]="usuario.tipo" readonly>
          </div>
          <div class="rs-line">
            <div class="rs-label">Estado:</div>
            <input [value]="usuario.estado" readonly>
          </div>
        </div>
      </div>

      <!-- DATOS DEL RECURSO -->
      <div class="rs-title">Datos del Recurso:</div>
      <div class="rs-grid">
        <!-- Col izquierda: imagen -->
        <div class="rs-col">
          <div class="rs-line">
            <div class="rs-label">Imagen referencial:</div>
            <div class="img-box">
              <img [src]="recurso?.portadaUrl || 'assets/cover-placeholder.png'" alt="Portada" loading="lazy">
              @if (!recurso?.portadaUrl) {
                <span class="material-symbols-rounded placeholder">image</span>
              }
            </div>
          </div>
        </div>
        <!-- Col derecha: campos -->
        <div class="rs-col">
          <div class="rs-line">
            <div class="rs-label">Tipo de recurso:</div>
            <input [value]="recurso?.tipo || ''" readonly>
          </div>
          <div class="rs-line">
            <div class="rs-label">Título:</div>
            <input [value]="recurso?.titulo || ''" readonly>
          </div>
          <div class="rs-line">
            <div class="rs-label">Autor:</div>
            <input [value]="recurso?.autor || ''" readonly>
          </div>
          <div class="rs-line">
            <div class="rs-label">Editorial:</div>
            <input [value]="recurso?.editorial || ''" readonly>
          </div>
        </div>
      </div>

      <!-- DETALLE DE RESERVA -->
      <div class="rs-title">Detalle de Reserva:</div>
      <div class="rs-grid">
        <!-- Col izquierda -->
        <div class="rs-col">
        <div class="rs-line">
            <div class="rs-label">Fecha de reserva:</div>
            <input type="text" [value]="(fechaReserva | date:'dd/MM/yyyy')" readonly>
        </div>
        <div class="rs-line">
            <div class="rs-label">Estado:</div>
            <input [value]="estadoReserva" readonly>
        </div>
        </div>

        <!-- Col derecha -->
        <div class="rs-col">
        <div class="rs-line">
            <div class="rs-label">Fecha de expiración:</div>
            <input type="text" [value]="(fechaExpiracion | date:'dd/MM/yyyy')" readonly>
        </div>
        </div>
      </div>
    </div> <!-- /.card -->
    <div class="actions">
        <button type="button" class="btn btn-green" (click)="guardar()">
            Generar Reserva
        </button>
        <a class="btn btn-gray" [routerLink]="['/reservas']" role="button">
            Regresar a Lista
        </a>
    </div>
  
</section>

<!-- Modal de error -->
<div class="modal-error" [class.show]="error">
  <div class="modal-content-error">
    <div class="modal-header-error">
      <h5>Error</h5>
      <button type="button" (click)="error=''" class="close-btn">&times;</button>
    </div>
    <div class="modal-body-error">
      {{ error }}
    </div>
    <div class="modal-footer-error">
      <button type="button" (click)="error=''">Cerrar</button>
    </div>
  </div>
</div>
